/*
AGPL 3.0 LICENSE
Copyright HYONSU(github wjdgustn) ALl rights Reserved
 */

const allowed_map="abcdefghijklmnopqrstuvwxyz1234567890".split(""),event_map={};let text_map="",secret_key_max_length=10;window.SecretKey={add:(e,t)=>{if("string"!=typeof e)throw new Error("Text must be string.");if((e=e.toLowerCase()).split("").forEach(e=>{if(-1==allowed_map.indexOf(e))throw new Error("Text must include only alphabet and number.")}),"function"!=typeof t)throw new Error("Callback must be function.");e.length>secret_key_max_length&&(secret_key_max_length=e.length),event_map[e]=t},remove:e=>{delete event_map[e]}},document.onkeydown=(e=>{if(-1!=allowed_map.indexOf(e.key)){(text_map+=e.key).length>secret_key_max_length&&(text_map=text_map.substring(text_map.length-secret_key_max_length));for(let e in event_map)text_map.endsWith(e)&&event_map[e]()}});